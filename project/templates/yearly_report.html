<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>年度觀影回顧</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        canvas {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body class="bg-light">

<!-- 使用者資料卡片 -->
<div class="container py-5">
    <div class="card shadow-sm mx-auto" style="max-width: 600px;">
        <div class="card-body">
            <h2 class="card-title text-center text-primary mb-4">
                {{ user_name }} 的 {{ year }} 年度觀影回顧
            </h2>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>總觀影次數：</strong>{{ total_watched }} 部
                </li>
                <li class="list-group-item">
                    <strong>涵蓋電影類型數：</strong>{{ distinct_genres }} 類
                </li>
                <li class="list-group-item">
                    <strong>總觀影時間：</strong>{{ total_minutes }} 分鐘
                </li>
                <li class="list-group-item">
                    <strong>平均評分：</strong>{{ average_rating }}
                </li>
            </ul>
        </div>
    </div>
</div>

<!-- 圖表區 -->
<div class="container py-5">
    <h3 class="text-center fw-bold mb-4">回顧</h3>
    <div class="row text-center">
        <div class="col-md-4 mb-4">
            <canvas id="genreChart"></canvas>
            <p class="fw-bold mt-3">觀影類型分佈</p>
        </div>
        <div class="col-md-4 mb-4">
            <canvas id="monthlyChart"></canvas>
            <p class="fw-bold mt-3">每月觀看與分享次數</p>
        </div>
        <div class="col-md-4 mb-4">
            <canvas id="emotionChart"></canvas>
            <p class="fw-bold mt-3">情緒雷達分析</p>
        </div>
    </div>
</div>

<!-- JS 引入 -->
<script>
  const selectedYear = "{{ year }}";
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/report_charts.js') }}"></script>
</body>
</html>
